<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Package Frictionless Data • datapackage.r</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Data Package Frictionless Data">
<meta property="og:description" content="Work with Frictionless Data Packages (&lt;https://frictionlessdata.io/specs/data-package/&gt;). Allows to load and validate any descriptor for a data package profile, create and modify descriptors and provides expose methods for reading and streaming data in the package. When a descriptor is a Tabular Data Package, it uses the Table Schema package (&lt;https://CRAN.R-project.org/package=tableschema.r&gt;) and exposes its functionality, for each resource object in the resources field.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">datapackage.r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/creating_data_packages_in_r.html">Creating Data Packages in R</a>
    </li>
    <li>
      <a href="articles/using_data_packages_in_r.Rmd.html">Using Data Packages in R</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/frictionlessdata/datapackage-r">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<p><img src="okgr.png" align="right" width="100px"><img src="oklabs.png" align="right" width="100px"><br><br><br><img src="Ffrictionless.png" align="left" width="120"><br> <b><font size="36">rictionless Data - <br>Data Package </font><b> ================ </p>
<p><a href="https://cran.r-project.org/package=datapackage.r"><embed src="https://www.r-pkg.org/badges/version/datapackage.r"></embed></a> <a href="https://travis-ci.org/frictionlessdata/datapackage-r"><img src="https://travis-ci.org/frictionlessdata/datapackage-r.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/github/frictionlessdata/datapackage-r?branch=master"><img src="https://coveralls.io/repos/github/frictionlessdata/datapackage-r/badge.svg?branch=master" alt="Coverage Status"></a><!-- [![Coverage Status](https://img.shields.io/codecov/c/github/frictionlessdata/datapackage-r/master.svg)](https://codecov.io/github/frictionlessdata/datapackage-r?branch=master) --> <a href="https://github.com/frictionlessdata/datapackage-r/issues"><img src="http://githubbadges.herokuapp.com/frictionlessdata/datapackage-r/issues.svg" alt="Github Issues"></a> <a href="https://github.com/frictionlessdata/datapackage-r/pulls"><img src="http://githubbadges.herokuapp.com/frictionlessdata/datapackage-r/pulls.svg" alt="Pending Pull-Requests"></a> <a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state but is no longer being actively developed; support/maintenance will be provided as time allows."></a> <a href="https://cran.r-project.org/"><img src="https://img.shields.io/badge/R%3E%3D-3.6-6666ff.svg" alt="minimal R version"></a> <a href="http://www.rdocumentation.org/packages/datapackage.r"><embed src="http://www.rdocumentation.org/badges/version/datapackage.r"></embed></a> <a href="http://cran.rstudio.com/web/packages/datapackage.r/index.html"><embed src="http://cranlogs.r-pkg.org/badges/grand-total/datapackage.r"></embed></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/licence-MIT-blue.svg" alt="Licence"></a> <a href="https://gitter.im/frictionlessdata/chat"><img src="https://img.shields.io/gitter/room/nwjs/nw.js.svg" alt="Gitter"></a></p>
<div id="description" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#description" class="anchor"></a>Description</h1></div>
<p>R package for working with <a href="http://frictionlessdata.io/specs/data-package">Frictionless Data Package</a>.</p>
<div id="features" class="section level2">
<h2 class="hasAnchor">
<a href="#features" class="anchor"></a>Features</h2>
<ul>
<li>
<code>Package</code> class for working with data packages</li>
<li>
<code>Resource</code> class for working with data resources</li>
<li>
<code>Profile</code> class for working with profiles</li>
<li>
<code>validate</code> function for validating data package descriptors</li>
<li>
<code>infer</code> function for inferring data package descriptors</li>
</ul>
</div>
</div>
<div id="getting-started" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h1>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>In order to install the latest distribution of <a href="https://www.r-project.org/">R software</a> to your computer you have to select one of the mirror sites of the <a href="https://cran.r-project.org//">Comprehensive R Archive Network</a>, select the appropriate link for your operating system and follow the wizard instructions.</p>
<p>For windows users you can:</p>
<ol>
<li>Go to CRAN</li>
<li>Click download R for Windows</li>
<li>Click Base (This is what you want to install R for the first time)</li>
<li>Download the latest R version</li>
<li>Run installation file and follow the instrustions of the installer.</li>
</ol>
<p>(Mac) OS X and Linux users may need to follow different steps depending on their system version to install R successfully and it is recommended to read the instructions on CRAN site carefully.</p>
<p>Even more detailed installation instructions can be found in <a href="https://cran.r-project.org/doc/manuals/R-admin.html">R Installation and Administration manual</a>.</p>
<p>To install <a href="https://www.rstudio.com/">RStudio</a>, you can download <a href="https://www.rstudio.com/products/rstudio/download/">RStudio Desktop</a> with Open Source License and follow the wizard instructions:</p>
<ol>
<li>Go to <a href="https://www.rstudio.com/products/rstudio/">RStudio</a>
</li>
<li>Click download on RStudio Desktop</li>
<li>Download on RStudio Desktop free download</li>
<li>Select the appropriate file for your system</li>
<li>Run installation file</li>
</ol>
<p>To install the <code>datapackage</code> package it is necessary to install first <a href="https://cran.r-project.org/package=devtools">devtools package</a> to make installation of github packages available.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Install devtools package if not already</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)</a></code></pre></div>
<p>Install <code>datapackage.r</code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># And then install the development version from github</span></a>
<a class="sourceLine" id="cb2-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"frictionlessdata/datapackage-r"</span>)</a></code></pre></div>
</div>
<div id="load-package" class="section level2">
<h2 class="hasAnchor">
<a href="#load-package" class="anchor"></a>Load package</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># load the package using</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(datapackage.r)</a></code></pre></div>
</div>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h1>
<p>Code examples in this readme requires R 3.3 or higher, You could see even more <a href="https://github.com/frictionlessdata/datapackage-r/tree/master/vignettes">examples</a> in vignettes directory.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">descriptor &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  "resources": [</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">    {</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">      "name": "example",</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">      "profile": "tabular-data-resource",</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">      "data": [</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">        ["height", "age", "name"],</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">        [180, 18, "Tony"],</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">        [192, 32, "Jacob"]</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="st">      ],</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="st">      "schema":  {</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="st">        "fields": [</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="st">          {"name": "height", "type": "integer" },</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="st">          {"name": "age", "type": "integer" },</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="st">          {"name": "name", "type": "string" }</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="st">        ]</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="st">      }</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="st">    }</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="st">  ]</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="st">}'</span></a>
<a class="sourceLine" id="cb4-21" title="21"></a>
<a class="sourceLine" id="cb4-22" title="22">dataPackage &lt;-<span class="st"> </span><span class="kw"><a href="reference/Package.load.html">Package.load</a></span>(descriptor)</a>
<a class="sourceLine" id="cb4-23" title="23">dataPackage</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co">## &lt;Package&gt;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">##   Public:</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">##     addResource: function (descriptor) </span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">##     clone: function (deep = FALSE) </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">##     commit: function (strict = NULL) </span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">##     descriptor: active binding</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">##     errors: active binding</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">##     getResource: function (name) </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">##     infer: function (pattern) </span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">##     initialize: function (descriptor = list(), basePath = NULL, strict = FALSE, </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">##     profile: active binding</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">##     removeResource: function (name) </span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">##     resourceNames: active binding</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">##     resources: active binding</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">##     save: function (target, type = "json") </span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">##     valid: active binding</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">##   Private:</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">##     basePath_: C:/Users/kleanthis-okfngr/Documents/datapackage-r</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">##     build_: function () </span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">##     currentDescriptor_: list</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">##     currentDescriptor_json: NULL</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">##     descriptor_: NULL</span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">##     errors_: list</span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="co">##     nextDescriptor_: list</span></a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">##     pattern_: NULL</span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="co">##     profile_: Profile, R6</span></a>
<a class="sourceLine" id="cb5-27" title="27"><span class="co">##     resources_: list</span></a>
<a class="sourceLine" id="cb5-28" title="28"><span class="co">##     resources_length: NULL</span></a>
<a class="sourceLine" id="cb5-29" title="29"><span class="co">##     strict_: FALSE</span></a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">resource &lt;-<span class="st"> </span>dataPackage<span class="op">$</span><span class="kw">getResource</span>(<span class="st">'example'</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co"># convert to json and add indentation with jsonlite prettify function</span></a>
<a class="sourceLine" id="cb6-3" title="3">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/prettify.html">prettify</a></span>(<span class="kw"><a href="reference/helpers.from.list.to.json.html">helpers.from.list.to.json</a></span>(resource<span class="op">$</span><span class="kw">read</span>()))</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co">## [</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">##     [</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">##         180,</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">##         18,</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">##         "Tony"</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">##     ],</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">##     [</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">##         192,</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">##         32,</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">##         "Jacob"</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">##     ]</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">## ]</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">## </span></a></code></pre></div>
</div>
<div id="documentation" class="section level1">
<h1 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h1>
<p>Json objects are not included in R base data types. <a href="https://CRAN.R-project.org/package=jsonlite">Jsonlite package</a> is internally used to convert json data to list objects. The input parameters of functions could be json strings, files or lists and the outputs are in list format to easily further process your data in R environment and exported as desired. The examples below show how to use jsonlite package to convert the output back to json adding indentation whitespace. More details about handling json you can see jsonlite documentation or vignettes <a href="https://CRAN.R-project.org/package=jsonlite">here</a>.</p>
<div id="working-with-package" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-package" class="anchor"></a>Working with Package</h2>
<p>A class for working with data packages. It provides various capabilities like loading local or remote data package, inferring a data package descriptor, saving a data package descriptor and many more.</p>
<p>Consider we have some local <code>csv</code> files in a <code>data</code> directory. Let’s create a data package based on this data using a <code>Package</code> class:</p>
<blockquote>
<p>inst/extdata/readme_example/cities.csv</p>
</blockquote>
<pre class="csv"><code>city,location
london,"51.50,-0.11"
paris,"48.85,2.30"
rome,"41.89,12.51"</code></pre>
<blockquote>
<p>inst/extdata/readme_example/population.csv</p>
</blockquote>
<pre class="csv"><code>city,year,population
london,2017,8780000
paris,2017,2240000
rome,2017,2860000</code></pre>
<p>First we create a blank data package:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">dataPackage &lt;-<span class="st"> </span><span class="kw"><a href="reference/Package.load.html">Package.load</a></span>()</a></code></pre></div>
<p>Now we’re ready to infer a data package descriptor based on data files we have. Because we have two csv files we use glob pattern <code>csv</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(dataPackage<span class="op">$</span><span class="kw"><a href="reference/infer.html">infer</a></span>(<span class="st">'csv'</span>), <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co">## {</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">##   "profile": ["tabular-data-package"],</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">##   "resources": [</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">##     {</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">##       "path": ["cities.csv"],</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co">##       "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">##       "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">##       "name": ["cities"],</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">##       "format": ["csv"],</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">##       "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">##       "schema": {</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">##         "fields": [</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">##             "name": ["city"],</span></a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co">##             "name": ["location"],</span></a>
<a class="sourceLine" id="cb12-20" title="20"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb12-22" title="22"><span class="co">##           }</span></a>
<a class="sourceLine" id="cb12-23" title="23"><span class="co">##         ],</span></a>
<a class="sourceLine" id="cb12-24" title="24"><span class="co">##         "missingValues": [</span></a>
<a class="sourceLine" id="cb12-25" title="25"><span class="co">##           [""]</span></a>
<a class="sourceLine" id="cb12-26" title="26"><span class="co">##         ]</span></a>
<a class="sourceLine" id="cb12-27" title="27"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb12-28" title="28"><span class="co">##     },</span></a>
<a class="sourceLine" id="cb12-29" title="29"><span class="co">##     {</span></a>
<a class="sourceLine" id="cb12-30" title="30"><span class="co">##       "path": ["population.csv"],</span></a>
<a class="sourceLine" id="cb12-31" title="31"><span class="co">##       "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb12-32" title="32"><span class="co">##       "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb12-33" title="33"><span class="co">##       "name": ["population"],</span></a>
<a class="sourceLine" id="cb12-34" title="34"><span class="co">##       "format": ["csv"],</span></a>
<a class="sourceLine" id="cb12-35" title="35"><span class="co">##       "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb12-36" title="36"><span class="co">##       "schema": {</span></a>
<a class="sourceLine" id="cb12-37" title="37"><span class="co">##         "fields": [</span></a>
<a class="sourceLine" id="cb12-38" title="38"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb12-39" title="39"><span class="co">##             "name": ["city"],</span></a>
<a class="sourceLine" id="cb12-40" title="40"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb12-41" title="41"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb12-42" title="42"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb12-43" title="43"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb12-44" title="44"><span class="co">##             "name": ["year"],</span></a>
<a class="sourceLine" id="cb12-45" title="45"><span class="co">##             "type": ["integer"],</span></a>
<a class="sourceLine" id="cb12-46" title="46"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb12-47" title="47"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb12-48" title="48"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb12-49" title="49"><span class="co">##             "name": ["population"],</span></a>
<a class="sourceLine" id="cb12-50" title="50"><span class="co">##             "type": ["integer"],</span></a>
<a class="sourceLine" id="cb12-51" title="51"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb12-52" title="52"><span class="co">##           }</span></a>
<a class="sourceLine" id="cb12-53" title="53"><span class="co">##         ],</span></a>
<a class="sourceLine" id="cb12-54" title="54"><span class="co">##         "missingValues": [</span></a>
<a class="sourceLine" id="cb12-55" title="55"><span class="co">##           [""]</span></a>
<a class="sourceLine" id="cb12-56" title="56"><span class="co">##         ]</span></a>
<a class="sourceLine" id="cb12-57" title="57"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb12-58" title="58"><span class="co">##     }</span></a>
<a class="sourceLine" id="cb12-59" title="59"><span class="co">##   ]</span></a>
<a class="sourceLine" id="cb12-60" title="60"><span class="co">## }</span></a></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(dataPackage<span class="op">$</span>descriptor, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co">## {</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co">##   "profile": ["tabular-data-package"],</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co">##   "resources": [</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co">##     {</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">##       "path": ["cities.csv"],</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">##       "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">##       "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">##       "name": ["cities"],</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">##       "format": ["csv"],</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">##       "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="co">##       "schema": {</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">##         "fields": [</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">##             "name": ["city"],</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="co">##             "name": ["location"],</span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb14-21" title="21"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="co">##           }</span></a>
<a class="sourceLine" id="cb14-23" title="23"><span class="co">##         ],</span></a>
<a class="sourceLine" id="cb14-24" title="24"><span class="co">##         "missingValues": [</span></a>
<a class="sourceLine" id="cb14-25" title="25"><span class="co">##           [""]</span></a>
<a class="sourceLine" id="cb14-26" title="26"><span class="co">##         ]</span></a>
<a class="sourceLine" id="cb14-27" title="27"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb14-28" title="28"><span class="co">##     },</span></a>
<a class="sourceLine" id="cb14-29" title="29"><span class="co">##     {</span></a>
<a class="sourceLine" id="cb14-30" title="30"><span class="co">##       "path": ["population.csv"],</span></a>
<a class="sourceLine" id="cb14-31" title="31"><span class="co">##       "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb14-32" title="32"><span class="co">##       "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb14-33" title="33"><span class="co">##       "name": ["population"],</span></a>
<a class="sourceLine" id="cb14-34" title="34"><span class="co">##       "format": ["csv"],</span></a>
<a class="sourceLine" id="cb14-35" title="35"><span class="co">##       "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb14-36" title="36"><span class="co">##       "schema": {</span></a>
<a class="sourceLine" id="cb14-37" title="37"><span class="co">##         "fields": [</span></a>
<a class="sourceLine" id="cb14-38" title="38"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb14-39" title="39"><span class="co">##             "name": ["city"],</span></a>
<a class="sourceLine" id="cb14-40" title="40"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb14-41" title="41"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb14-42" title="42"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb14-43" title="43"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb14-44" title="44"><span class="co">##             "name": ["year"],</span></a>
<a class="sourceLine" id="cb14-45" title="45"><span class="co">##             "type": ["integer"],</span></a>
<a class="sourceLine" id="cb14-46" title="46"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb14-47" title="47"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb14-48" title="48"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb14-49" title="49"><span class="co">##             "name": ["population"],</span></a>
<a class="sourceLine" id="cb14-50" title="50"><span class="co">##             "type": ["integer"],</span></a>
<a class="sourceLine" id="cb14-51" title="51"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb14-52" title="52"><span class="co">##           }</span></a>
<a class="sourceLine" id="cb14-53" title="53"><span class="co">##         ],</span></a>
<a class="sourceLine" id="cb14-54" title="54"><span class="co">##         "missingValues": [</span></a>
<a class="sourceLine" id="cb14-55" title="55"><span class="co">##           [""]</span></a>
<a class="sourceLine" id="cb14-56" title="56"><span class="co">##         ]</span></a>
<a class="sourceLine" id="cb14-57" title="57"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb14-58" title="58"><span class="co">##     }</span></a>
<a class="sourceLine" id="cb14-59" title="59"><span class="co">##   ]</span></a>
<a class="sourceLine" id="cb14-60" title="60"><span class="co">## }</span></a></code></pre></div>
<p>An <code>infer</code> method has found all our files and inspected it to extract useful metadata like profile, encoding, format, Table Schema etc. Let’s tweak it a little bit:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">dataPackage<span class="op">$</span>descriptor<span class="op">$</span>resources[[<span class="dv">2</span>]]<span class="op">$</span>schema<span class="op">$</span>fields[[<span class="dv">2</span>]]<span class="op">$</span>type &lt;-<span class="st"> 'year'</span></a>
<a class="sourceLine" id="cb15-2" title="2">dataPackage<span class="op">$</span><span class="kw">commit</span>()</a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">dataPackage<span class="op">$</span>valid</a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<p>Because our resources are tabular we could read it as a tabular data:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(dataPackage<span class="op">$</span><span class="kw">getResource</span>(<span class="st">"population"</span>)<span class="op">$</span><span class="kw">read</span>(<span class="dt">keyed =</span> <span class="ot">TRUE</span>),<span class="dt">auto_unbox =</span> <span class="ot">FALSE</span>,<span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co">## [</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">##     "city": ["london"],</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">##     "year": [2017],</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">##     "population": [8780000]</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="co">##     "city": ["paris"],</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">##     "year": [2017],</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="co">##     "population": [2240000]</span></a>
<a class="sourceLine" id="cb20-11" title="11"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb20-12" title="12"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb20-13" title="13"><span class="co">##     "city": ["rome"],</span></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="co">##     "year": [2017],</span></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="co">##     "population": [2860000]</span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="co">##   }</span></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="co">## ]</span></a></code></pre></div>
<p>Let’s save our descriptor on the disk. After it we could update our <code>datapackage.json</code> as we want, make some changes etc:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">dataPackage.save</span>(<span class="st">'datapackage.json'</span>)</a></code></pre></div>
<p>To continue the work with the data package we just load it again but this time using local <code>datapackage.json</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">dataPackage &lt;-<span class="st"> </span><span class="kw"><a href="reference/Package.load.html">Package.load</a></span>(<span class="st">'datapackage.json'</span>)</a>
<a class="sourceLine" id="cb22-2" title="2"><span class="co"># Continue the work</span></a></code></pre></div>
<p>It was one basic introduction to the <code>Package</code> class. To learn more let’s take a look on <code>Package</code> class API reference.</p>
<div id="resource" class="section level3">
<h3 class="hasAnchor">
<a href="#resource" class="anchor"></a>Resource</h3>
<p>A class for working with data resources. You can read or iterate tabular resources using the <code>iter/read</code> methods and all resource as bytes using <code>rowIter/rowRead</code> methods.</p>
<p>Consider we have some local csv file. It could be inline data or remote link - all supported by <code>Resource</code> class (except local files for in-brower usage of course). But say it’s <code>cities.csv</code> for now:</p>
<pre class="csv"><code>city,location
london,"51.50,-0.11"
paris,"48.85,2.30"
rome,N/A</code></pre>
<p>Let’s create and read a resource. We use static <code>Resource$load</code> method instantiate a resource. Because resource is tabular we could use <code>resourceread</code> method with a <code>keyed</code> option to get an list of keyed rows:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">resource &lt;-<span class="st"> </span><span class="kw"><a href="reference/Resource.load.html">Resource.load</a></span>(<span class="st">'{"path": "cities.csv"}'</span>)</a>
<a class="sourceLine" id="cb24-2" title="2">resource<span class="op">$</span>tabular</a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(resource<span class="op">$</span><span class="kw">read</span>(<span class="dt">keyed =</span> <span class="ot">TRUE</span>), <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="co">## [</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="co">##     "city": ["london"],</span></a>
<a class="sourceLine" id="cb27-4" title="4"><span class="co">##     "location": ["\"51.50 -0.11\""]</span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb27-6" title="6"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb27-7" title="7"><span class="co">##     "city": ["paris"],</span></a>
<a class="sourceLine" id="cb27-8" title="8"><span class="co">##     "location": ["\"48.85 2.30\""]</span></a>
<a class="sourceLine" id="cb27-9" title="9"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb27-10" title="10"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb27-11" title="11"><span class="co">##     "city": ["rome"],</span></a>
<a class="sourceLine" id="cb27-12" title="12"><span class="co">##     "location": ["\"41.89 12.51\""]</span></a>
<a class="sourceLine" id="cb27-13" title="13"><span class="co">##   }</span></a>
<a class="sourceLine" id="cb27-14" title="14"><span class="co">## ]</span></a></code></pre></div>
<p>As we could see our locations are just a strings. But it should be geopoints. Also Rome’s location is not available but it’s also just a <code>N/A</code> string instead of <code>null</code>. First we have to infer resource metadata:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(resource<span class="op">$</span><span class="kw"><a href="reference/infer.html">infer</a></span>(), <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="co">## {</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="co">##   "path": ["cities.csv"],</span></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="co">##   "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="co">##   "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="co">##   "name": ["cities"],</span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="co">##   "format": ["csv"],</span></a>
<a class="sourceLine" id="cb29-7" title="7"><span class="co">##   "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb29-8" title="8"><span class="co">##   "schema": {</span></a>
<a class="sourceLine" id="cb29-9" title="9"><span class="co">##     "fields": [</span></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="co">##       {</span></a>
<a class="sourceLine" id="cb29-11" title="11"><span class="co">##         "name": ["city"],</span></a>
<a class="sourceLine" id="cb29-12" title="12"><span class="co">##         "type": ["string"],</span></a>
<a class="sourceLine" id="cb29-13" title="13"><span class="co">##         "format": ["default"]</span></a>
<a class="sourceLine" id="cb29-14" title="14"><span class="co">##       },</span></a>
<a class="sourceLine" id="cb29-15" title="15"><span class="co">##       {</span></a>
<a class="sourceLine" id="cb29-16" title="16"><span class="co">##         "name": ["location"],</span></a>
<a class="sourceLine" id="cb29-17" title="17"><span class="co">##         "type": ["string"],</span></a>
<a class="sourceLine" id="cb29-18" title="18"><span class="co">##         "format": ["default"]</span></a>
<a class="sourceLine" id="cb29-19" title="19"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb29-20" title="20"><span class="co">##     ],</span></a>
<a class="sourceLine" id="cb29-21" title="21"><span class="co">##     "missingValues": [</span></a>
<a class="sourceLine" id="cb29-22" title="22"><span class="co">##       [""]</span></a>
<a class="sourceLine" id="cb29-23" title="23"><span class="co">##     ]</span></a>
<a class="sourceLine" id="cb29-24" title="24"><span class="co">##   }</span></a>
<a class="sourceLine" id="cb29-25" title="25"><span class="co">## }</span></a></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(resource<span class="op">$</span>descriptor, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="co">## {</span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="co">##   "path": ["cities.csv"],</span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="co">##   "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb31-4" title="4"><span class="co">##   "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb31-5" title="5"><span class="co">##   "name": ["cities"],</span></a>
<a class="sourceLine" id="cb31-6" title="6"><span class="co">##   "format": ["csv"],</span></a>
<a class="sourceLine" id="cb31-7" title="7"><span class="co">##   "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb31-8" title="8"><span class="co">##   "schema": {</span></a>
<a class="sourceLine" id="cb31-9" title="9"><span class="co">##     "fields": [</span></a>
<a class="sourceLine" id="cb31-10" title="10"><span class="co">##       {</span></a>
<a class="sourceLine" id="cb31-11" title="11"><span class="co">##         "name": ["city"],</span></a>
<a class="sourceLine" id="cb31-12" title="12"><span class="co">##         "type": ["string"],</span></a>
<a class="sourceLine" id="cb31-13" title="13"><span class="co">##         "format": ["default"]</span></a>
<a class="sourceLine" id="cb31-14" title="14"><span class="co">##       },</span></a>
<a class="sourceLine" id="cb31-15" title="15"><span class="co">##       {</span></a>
<a class="sourceLine" id="cb31-16" title="16"><span class="co">##         "name": ["location"],</span></a>
<a class="sourceLine" id="cb31-17" title="17"><span class="co">##         "type": ["string"],</span></a>
<a class="sourceLine" id="cb31-18" title="18"><span class="co">##         "format": ["default"]</span></a>
<a class="sourceLine" id="cb31-19" title="19"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb31-20" title="20"><span class="co">##     ],</span></a>
<a class="sourceLine" id="cb31-21" title="21"><span class="co">##     "missingValues": [</span></a>
<a class="sourceLine" id="cb31-22" title="22"><span class="co">##       [""]</span></a>
<a class="sourceLine" id="cb31-23" title="23"><span class="co">##     ]</span></a>
<a class="sourceLine" id="cb31-24" title="24"><span class="co">##   }</span></a>
<a class="sourceLine" id="cb31-25" title="25"><span class="co">## }</span></a></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="co"># resource$read( keyed = TRUE )</span></a>
<a class="sourceLine" id="cb32-2" title="2"><span class="co"># # Fails with a data validation error</span></a></code></pre></div>
<p>Let’s fix not available location. There is a <code>missingValues</code> property in Table Schema specification. As a first try we set <code>missingValues</code> to <code>N/A</code> in <code>resource$descriptor.schema</code>. Resource descriptor could be changed in-place but all changes should be commited by <code>resource$commit()</code>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">resource<span class="op">$</span>descriptor<span class="op">$</span>schema<span class="op">$</span>missingValues &lt;-<span class="st"> 'N/A'</span></a>
<a class="sourceLine" id="cb33-2" title="2">resource<span class="op">$</span><span class="kw">commit</span>()</a></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1">resource<span class="op">$</span>valid <span class="co"># FALSE</span></a></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co">## [1] FALSE</span></a></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1">resource<span class="op">$</span>errors</a></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="co">## [1] "Descriptor validation error:\n            data.schema.missingValues - is the wrong type"</span></a></code></pre></div>
<p>As a good citiziens we’ve decided to check out recource descriptor validity. And it’s not valid! We should use an list for <code>missingValues</code> property. Also don’t forget to have an empty string as a missing value:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">resource<span class="op">$</span>descriptor<span class="op">$</span>schema[[<span class="st">'missingValues'</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">''</span>, <span class="st">'N/A'</span>)</a>
<a class="sourceLine" id="cb39-2" title="2">resource<span class="op">$</span><span class="kw">commit</span>()</a></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1">resource<span class="op">$</span>valid <span class="co"># TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<p>All good. It looks like we’re ready to read our data again:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(resource<span class="op">$</span><span class="kw">read</span>( <span class="dt">keyed =</span> <span class="ot">TRUE</span> ), <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="co">## [</span></a>
<a class="sourceLine" id="cb44-2" title="2"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="co">##     "city": ["london"],</span></a>
<a class="sourceLine" id="cb44-4" title="4"><span class="co">##     "location": ["\"51.50 -0.11\""]</span></a>
<a class="sourceLine" id="cb44-5" title="5"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb44-6" title="6"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="co">##     "city": ["paris"],</span></a>
<a class="sourceLine" id="cb44-8" title="8"><span class="co">##     "location": ["\"48.85 2.30\""]</span></a>
<a class="sourceLine" id="cb44-9" title="9"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb44-10" title="10"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb44-11" title="11"><span class="co">##     "city": ["rome"],</span></a>
<a class="sourceLine" id="cb44-12" title="12"><span class="co">##     "location": ["\"41.89 12.51\""]</span></a>
<a class="sourceLine" id="cb44-13" title="13"><span class="co">##   }</span></a>
<a class="sourceLine" id="cb44-14" title="14"><span class="co">## ]</span></a></code></pre></div>
<p>Now we see that: - locations are lists with numeric lattide and longitude - Rome’s location is a native JavaScript <code>null</code></p>
<p>And because there are no errors on data reading we could be sure that our data is valid againt our schema. Let’s save our resource descriptor:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1">resource<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(<span class="st">'dataresource.json'</span>)</a></code></pre></div>
<p>Let’s check newly-crated <code>dataresource.json</code>. It contains path to our data file, inferred metadata and our <code>missingValues</code> tweak:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb46-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb46-2" title="2"><span class="dt">"path"</span><span class="fu">:</span> <span class="st">"data.csv"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-3" title="3"><span class="dt">"profile"</span><span class="fu">:</span> <span class="st">"tabular-data-resource"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-4" title="4"><span class="dt">"encoding"</span><span class="fu">:</span> <span class="st">"utf-8"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-5" title="5"><span class="dt">"name"</span><span class="fu">:</span> <span class="st">"data"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-6" title="6"><span class="dt">"format"</span><span class="fu">:</span> <span class="st">"csv"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-7" title="7"><span class="dt">"mediatype"</span><span class="fu">:</span> <span class="st">"text/csv"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-8" title="8"><span class="dt">"schema"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb46-9" title="9"><span class="dt">"fields"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb46-10" title="10"><span class="fu">{</span></a>
<a class="sourceLine" id="cb46-11" title="11"><span class="dt">"name"</span><span class="fu">:</span> <span class="st">"city"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-12" title="12"><span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-13" title="13"><span class="dt">"format"</span><span class="fu">:</span> <span class="st">"default"</span></a>
<a class="sourceLine" id="cb46-14" title="14"><span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb46-15" title="15"><span class="fu">{</span></a>
<a class="sourceLine" id="cb46-16" title="16"><span class="dt">"name"</span><span class="fu">:</span> <span class="st">"location"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-17" title="17"><span class="dt">"type"</span><span class="fu">:</span> <span class="st">"geopoint"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-18" title="18"><span class="dt">"format"</span><span class="fu">:</span> <span class="st">"default"</span></a>
<a class="sourceLine" id="cb46-19" title="19"><span class="fu">}</span></a>
<a class="sourceLine" id="cb46-20" title="20"><span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb46-21" title="21"><span class="dt">"missingValues"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb46-22" title="22"><span class="st">""</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb46-23" title="23"><span class="st">"N/A"</span></a>
<a class="sourceLine" id="cb46-24" title="24"><span class="ot">]</span></a>
<a class="sourceLine" id="cb46-25" title="25"><span class="fu">}</span></a>
<a class="sourceLine" id="cb46-26" title="26"><span class="fu">}</span></a></code></pre></div>
<p>If we decide to improve it even more we could update the <code>dataresource.json</code> file and then open it again using local file name:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1">resource &lt;-<span class="st"> </span><span class="kw"><a href="reference/Resource.load.html">Resource.load</a></span>(<span class="st">'dataresource.json'</span>)</a>
<a class="sourceLine" id="cb47-2" title="2"><span class="co"># Continue the work</span></a></code></pre></div>
<p>It was one basic introduction to the <code>Resource</code> class. To learn more let’s take a look on <code>Resource</code> class API reference.</p>
</div>
<div id="working-with-profile" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-profile" class="anchor"></a>Working with Profile</h3>
<p>A component to represent JSON Schema profile from <a href="https://specs.frictionlessdata.io/schemas/registry.json">Profiles Registry</a>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1">profile &lt;-<span class="st"> </span><span class="kw"><a href="reference/Profile.load.html">Profile.load</a></span>(<span class="st">'data-package'</span>)</a>
<a class="sourceLine" id="cb48-2" title="2">profile<span class="op">$</span>name <span class="co"># data-package</span></a></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1"><span class="co">## [1] "data-package"</span></a></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1">profile<span class="op">$</span>jsonschema <span class="co"># List of JSON Schema contents</span></a></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1">valid_errors &lt;-<span class="st"> </span>profile<span class="op">$</span><span class="kw"><a href="reference/validate.html">validate</a></span>(descriptor)</a>
<a class="sourceLine" id="cb51-2" title="2">valid &lt;-<span class="st"> </span>valid_errors<span class="op">$</span>valid <span class="co"># TRUE if valid descriptor</span></a>
<a class="sourceLine" id="cb51-3" title="3">valid</a></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
</div>
<div id="working-with-validate" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-validate" class="anchor"></a>Working with validate</h3>
<p>A standalone function to validate a data package descriptor:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">valid_errors &lt;-<span class="st"> </span><span class="kw"><a href="reference/validate.html">validate</a></span>(<span class="st">'{"name": "Invalid Datapackage"}'</span>)</a></code></pre></div>
</div>
<div id="working-with-infer" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-infer" class="anchor"></a>Working with infer</h3>
<p>A standalone function to infer a data package descriptor.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1">descriptor &lt;-<span class="st"> </span><span class="kw"><a href="reference/infer.html">infer</a></span>(<span class="st">"csv"</span>,<span class="dt">basePath =</span> <span class="st">'.'</span>)</a>
<a class="sourceLine" id="cb54-2" title="2">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(descriptor, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb55"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="co">## {</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="co">##   "profile": ["tabular-data-package"],</span></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="co">##   "resources": [</span></a>
<a class="sourceLine" id="cb55-4" title="4"><span class="co">##     {</span></a>
<a class="sourceLine" id="cb55-5" title="5"><span class="co">##       "path": ["cities.csv"],</span></a>
<a class="sourceLine" id="cb55-6" title="6"><span class="co">##       "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb55-7" title="7"><span class="co">##       "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb55-8" title="8"><span class="co">##       "name": ["cities"],</span></a>
<a class="sourceLine" id="cb55-9" title="9"><span class="co">##       "format": ["csv"],</span></a>
<a class="sourceLine" id="cb55-10" title="10"><span class="co">##       "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb55-11" title="11"><span class="co">##       "schema": {</span></a>
<a class="sourceLine" id="cb55-12" title="12"><span class="co">##         "fields": [</span></a>
<a class="sourceLine" id="cb55-13" title="13"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb55-14" title="14"><span class="co">##             "name": ["city"],</span></a>
<a class="sourceLine" id="cb55-15" title="15"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb55-16" title="16"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb55-17" title="17"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb55-18" title="18"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb55-19" title="19"><span class="co">##             "name": ["location"],</span></a>
<a class="sourceLine" id="cb55-20" title="20"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb55-21" title="21"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb55-22" title="22"><span class="co">##           }</span></a>
<a class="sourceLine" id="cb55-23" title="23"><span class="co">##         ],</span></a>
<a class="sourceLine" id="cb55-24" title="24"><span class="co">##         "missingValues": [</span></a>
<a class="sourceLine" id="cb55-25" title="25"><span class="co">##           [""]</span></a>
<a class="sourceLine" id="cb55-26" title="26"><span class="co">##         ]</span></a>
<a class="sourceLine" id="cb55-27" title="27"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb55-28" title="28"><span class="co">##     },</span></a>
<a class="sourceLine" id="cb55-29" title="29"><span class="co">##     {</span></a>
<a class="sourceLine" id="cb55-30" title="30"><span class="co">##       "path": ["population.csv"],</span></a>
<a class="sourceLine" id="cb55-31" title="31"><span class="co">##       "profile": ["tabular-data-resource"],</span></a>
<a class="sourceLine" id="cb55-32" title="32"><span class="co">##       "encoding": ["utf-8"],</span></a>
<a class="sourceLine" id="cb55-33" title="33"><span class="co">##       "name": ["population"],</span></a>
<a class="sourceLine" id="cb55-34" title="34"><span class="co">##       "format": ["csv"],</span></a>
<a class="sourceLine" id="cb55-35" title="35"><span class="co">##       "mediatype": ["text/csv"],</span></a>
<a class="sourceLine" id="cb55-36" title="36"><span class="co">##       "schema": {</span></a>
<a class="sourceLine" id="cb55-37" title="37"><span class="co">##         "fields": [</span></a>
<a class="sourceLine" id="cb55-38" title="38"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb55-39" title="39"><span class="co">##             "name": ["city"],</span></a>
<a class="sourceLine" id="cb55-40" title="40"><span class="co">##             "type": ["string"],</span></a>
<a class="sourceLine" id="cb55-41" title="41"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb55-42" title="42"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb55-43" title="43"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb55-44" title="44"><span class="co">##             "name": ["year"],</span></a>
<a class="sourceLine" id="cb55-45" title="45"><span class="co">##             "type": ["integer"],</span></a>
<a class="sourceLine" id="cb55-46" title="46"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb55-47" title="47"><span class="co">##           },</span></a>
<a class="sourceLine" id="cb55-48" title="48"><span class="co">##           {</span></a>
<a class="sourceLine" id="cb55-49" title="49"><span class="co">##             "name": ["population"],</span></a>
<a class="sourceLine" id="cb55-50" title="50"><span class="co">##             "type": ["integer"],</span></a>
<a class="sourceLine" id="cb55-51" title="51"><span class="co">##             "format": ["default"]</span></a>
<a class="sourceLine" id="cb55-52" title="52"><span class="co">##           }</span></a>
<a class="sourceLine" id="cb55-53" title="53"><span class="co">##         ],</span></a>
<a class="sourceLine" id="cb55-54" title="54"><span class="co">##         "missingValues": [</span></a>
<a class="sourceLine" id="cb55-55" title="55"><span class="co">##           [""]</span></a>
<a class="sourceLine" id="cb55-56" title="56"><span class="co">##         ]</span></a>
<a class="sourceLine" id="cb55-57" title="57"><span class="co">##       }</span></a>
<a class="sourceLine" id="cb55-58" title="58"><span class="co">##     }</span></a>
<a class="sourceLine" id="cb55-59" title="59"><span class="co">##   ]</span></a>
<a class="sourceLine" id="cb55-60" title="60"><span class="co">## }</span></a></code></pre></div>
</div>
<div id="working-with-foreign-keys" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-foreign-keys" class="anchor"></a>Working with Foreign Keys</h3>
<p>The package supports foreign keys described in the <a href="http://specs.frictionlessdata.io/table-schema/#foreign-keys">Table Schema</a> specification. It means if your data package descriptor use <code>resources[]$schema$foreignKeys</code> property for some resources a data integrity will be checked on reading operations.</p>
<p>Consider we have a data package:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1">DESCRIPTOR &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb56-2" title="2"><span class="st">"resources": [</span></a>
<a class="sourceLine" id="cb56-3" title="3"><span class="st">{</span></a>
<a class="sourceLine" id="cb56-4" title="4"><span class="st">"name": "teams",</span></a>
<a class="sourceLine" id="cb56-5" title="5"><span class="st">"data": [</span></a>
<a class="sourceLine" id="cb56-6" title="6"><span class="st">["id", "name", "city"],</span></a>
<a class="sourceLine" id="cb56-7" title="7"><span class="st">["1", "Arsenal", "London"],</span></a>
<a class="sourceLine" id="cb56-8" title="8"><span class="st">["2", "Real", "Madrid"],</span></a>
<a class="sourceLine" id="cb56-9" title="9"><span class="st">["3", "Bayern", "Munich"]</span></a>
<a class="sourceLine" id="cb56-10" title="10"><span class="st">],</span></a>
<a class="sourceLine" id="cb56-11" title="11"><span class="st">"schema": {</span></a>
<a class="sourceLine" id="cb56-12" title="12"><span class="st">"fields": [</span></a>
<a class="sourceLine" id="cb56-13" title="13"><span class="st">{"name": "id", "type": "integer"},</span></a>
<a class="sourceLine" id="cb56-14" title="14"><span class="st">{"name": "name", "type": "string"},</span></a>
<a class="sourceLine" id="cb56-15" title="15"><span class="st">{"name": "city", "type": "string"}</span></a>
<a class="sourceLine" id="cb56-16" title="16"><span class="st">],</span></a>
<a class="sourceLine" id="cb56-17" title="17"><span class="st">"foreignKeys": [</span></a>
<a class="sourceLine" id="cb56-18" title="18"><span class="st">{</span></a>
<a class="sourceLine" id="cb56-19" title="19"><span class="st">"fields": "city",</span></a>
<a class="sourceLine" id="cb56-20" title="20"><span class="st">"reference": {"resource": "cities", "fields": "name"}</span></a>
<a class="sourceLine" id="cb56-21" title="21"><span class="st">}</span></a>
<a class="sourceLine" id="cb56-22" title="22"><span class="st">]</span></a>
<a class="sourceLine" id="cb56-23" title="23"><span class="st">}</span></a>
<a class="sourceLine" id="cb56-24" title="24"><span class="st">}, {</span></a>
<a class="sourceLine" id="cb56-25" title="25"><span class="st">"name": "cities",</span></a>
<a class="sourceLine" id="cb56-26" title="26"><span class="st">"data": [</span></a>
<a class="sourceLine" id="cb56-27" title="27"><span class="st">["name", "country"],</span></a>
<a class="sourceLine" id="cb56-28" title="28"><span class="st">["London", "England"],</span></a>
<a class="sourceLine" id="cb56-29" title="29"><span class="st">["Madrid", "Spain"]</span></a>
<a class="sourceLine" id="cb56-30" title="30"><span class="st">]</span></a>
<a class="sourceLine" id="cb56-31" title="31"><span class="st">}</span></a>
<a class="sourceLine" id="cb56-32" title="32"><span class="st">]</span></a>
<a class="sourceLine" id="cb56-33" title="33"><span class="st">}'</span></a></code></pre></div>
<p>Let’s check relations for a <code>teams</code> resource:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1">package &lt;-<span class="st"> </span><span class="kw"><a href="reference/Package.load.html">Package.load</a></span>(DESCRIPTOR)</a>
<a class="sourceLine" id="cb57-2" title="2">teams &lt;-<span class="st"> </span>package<span class="op">$</span><span class="kw">getResource</span>(<span class="st">'teams'</span>)</a></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">teams<span class="op">$</span><span class="kw">checkRelations</span>()</a></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="co">## Error: Foreign key 'city' violation in row '4'</span></a></code></pre></div>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1"><span class="co"># tableschema.exceptions.RelationError: Foreign key "['city']" violation in row "4"</span></a></code></pre></div>
<p>As we could see there is a foreign key violation. That’s because our lookup table <code>cities</code> doesn’t have a city of <code>Munich</code> but we have a team from there. We need to fix it in <code>cities</code> resource:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1">package<span class="op">$</span>descriptor<span class="op">$</span>resources[[<span class="dv">2</span>]]<span class="op">$</span>data &lt;-<span class="st"> </span>rlist<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rlist/man/list.append.html">list.append</a></span>(package<span class="op">$</span>descriptor<span class="op">$</span>resources[[<span class="dv">2</span>]]<span class="op">$</span>data, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">'Munich'</span>, <span class="st">'Germany'</span>))</a>
<a class="sourceLine" id="cb61-2" title="2">package<span class="op">$</span><span class="kw">commit</span>()</a></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1">teams &lt;-<span class="st"> </span>package<span class="op">$</span><span class="kw">getResource</span>(<span class="st">'teams'</span>)</a>
<a class="sourceLine" id="cb63-2" title="2">teams<span class="op">$</span><span class="kw">checkRelations</span>()</a></code></pre></div>
<div class="sourceCode" id="cb64"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1"><span class="co"># TRUE</span></a></code></pre></div>
<p>Fixed! But not only a check operation is available. We could use <code>relations</code> argument for <code>resource$iter/read</code> methods to dereference a resource relations:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1">jsonlite<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/jsonlite/reference/fromJSON.html">toJSON</a></span>(teams<span class="op">$</span><span class="kw">read</span>(<span class="dt">keyed =</span> <span class="ot">TRUE</span>, <span class="dt">relations =</span> <span class="ot">FALSE</span>), <span class="dt">pretty =</span>  <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1"><span class="co">## [</span></a>
<a class="sourceLine" id="cb67-2" title="2"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb67-3" title="3"><span class="co">##     "id": [1],</span></a>
<a class="sourceLine" id="cb67-4" title="4"><span class="co">##     "name": ["Arsenal"],</span></a>
<a class="sourceLine" id="cb67-5" title="5"><span class="co">##     "city": ["London"]</span></a>
<a class="sourceLine" id="cb67-6" title="6"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb67-7" title="7"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb67-8" title="8"><span class="co">##     "id": [2],</span></a>
<a class="sourceLine" id="cb67-9" title="9"><span class="co">##     "name": ["Real"],</span></a>
<a class="sourceLine" id="cb67-10" title="10"><span class="co">##     "city": ["Madrid"]</span></a>
<a class="sourceLine" id="cb67-11" title="11"><span class="co">##   },</span></a>
<a class="sourceLine" id="cb67-12" title="12"><span class="co">##   {</span></a>
<a class="sourceLine" id="cb67-13" title="13"><span class="co">##     "id": [3],</span></a>
<a class="sourceLine" id="cb67-14" title="14"><span class="co">##     "name": ["Bayern"],</span></a>
<a class="sourceLine" id="cb67-15" title="15"><span class="co">##     "city": ["Munich"]</span></a>
<a class="sourceLine" id="cb67-16" title="16"><span class="co">##   }</span></a>
<a class="sourceLine" id="cb67-17" title="17"><span class="co">## ]</span></a></code></pre></div>
<p>Instead of plain city name we’ve got a dictionary containing a city data. These <code>resource$iter/read</code> methods will fail with the same as <code>resource$check_relations</code> error if there is an integrity issue. But only if <code>relations = TRUE</code> flag is passed.</p>
</div>
</div>
<div id="api-referencer" class="section level2">
<h2 class="hasAnchor">
<a href="#api-referencer" class="anchor"></a>API Referencer</h2>
<div id="package" class="section level3">
<h3 class="hasAnchor">
<a href="#package" class="anchor"></a>Package</h3>
<p>Package representation</p>
<ul>
<li><a href="#Package">Package</a></li>
<li><em>instance</em></li>
<li>
<a href="#Package+valid">$valid</a> ⇒ <code>Boolean</code>
</li>
<li>
<a href="#Package+errors">$errors</a> ⇒ <code>List.&lt;Error&gt;</code>
</li>
<li>
<a href="#Package+profile">$profile</a> ⇒ <code>Profile</code>
</li>
<li>
<a href="#Package+descriptor">$descriptor</a> ⇒ <code>Object</code>
</li>
<li>
<a href="#Package+resources">$resources</a> ⇒ <code>List.&lt;Resoruce&gt;</code>
</li>
<li>
<a href="#Package+resourceNames">$resourceNames</a> ⇒ <code>List.&lt;string&gt;</code>
</li>
<li>
<a href="#Package+getResource">$getResource(name)</a> ⇒ <code>Resource</code> | <code>null</code>
</li>
<li>
<a href="#Package+addResource">$addResource(descriptor)</a> ⇒ <code>Resource</code>
</li>
<li>
<a href="#Package+removeResource">$removeResource(name)</a> ⇒ <code>Resource</code> | <code>null</code>
</li>
<li>
<a href="#Package+infer">$infer(pattern)</a> ⇒ <code>Object</code>
</li>
<li>
<a href="#Package+commit">$commit(strict)</a> ⇒ <code>Boolean</code>
</li>
<li><a href="#Package+save">$save(target, raises, returns)</a></li>
<li><em>static</em></li>
<li>
<a href="#Package.load">.load(descriptor, basePath, strict)</a> ⇒ <a href="#Package"><code>Package</code></a>
</li>
</ul>
<div id="packagevalid--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#packagevalid--boolean" class="anchor"></a>package$.valid ⇒ <code>Boolean</code>
</h4>
<p>Validation status</p>
<p>It always <code>true</code> in strict mode.</p>
<p><strong>Returns</strong>: <code>Boolean</code> - returns validation status</p>
</div>
<div id="packageerrors--listerror" class="section level4">
<h4 class="hasAnchor">
<a href="#packageerrors--listerror" class="anchor"></a>package$errors ⇒ <code>List.&lt;Error&gt;</code>
</h4>
<p>Validation errors</p>
<p>It always empty in strict mode.</p>
<p><strong>Returns</strong>: <code>List.&lt;Error&gt;</code> - returns validation errors</p>
</div>
<div id="packageprofile--profile" class="section level4">
<h4 class="hasAnchor">
<a href="#packageprofile--profile" class="anchor"></a>package$profile ⇒ <code>Profile</code>
</h4>
<p>Profile</p>
</div>
<div id="packagedescriptor--object" class="section level4">
<h4 class="hasAnchor">
<a href="#packagedescriptor--object" class="anchor"></a>package$descriptor ⇒ <code>Object</code>
</h4>
<p>Descriptor</p>
<p><strong>Returns</strong>: <code>Object</code> - schema descriptor</p>
</div>
<div id="packageresources--listresoruce" class="section level4">
<h4 class="hasAnchor">
<a href="#packageresources--listresoruce" class="anchor"></a>package$resources ⇒ <code>List.&lt;Resoruce&gt;</code>
</h4>
<p>Resources</p>
</div>
<div id="packageresourcenames--liststring" class="section level4">
<h4 class="hasAnchor">
<a href="#packageresourcenames--liststring" class="anchor"></a>package$resourceNames ⇒ <code>List.&lt;string&gt;</code>
</h4>
<p>Resource names</p>
</div>
<div id="packagegetresourcename--resource--null" class="section level4">
<h4 class="hasAnchor">
<a href="#packagegetresourcename--resource--null" class="anchor"></a>package$getResource(name) ⇒ <code>Resource</code> | <code>null</code>
</h4>
<p>Return a resource</p>
<p><strong>Returns</strong>: <code>Resource</code> | <code>null</code> - resource instance if exists</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
</tr></thead>
<tbody><tr class="odd">
<td>name</td>
<td><code>string</code></td>
</tr></tbody>
</table>
</div>
<div id="packageaddresourcedescriptor--resource" class="section level4">
<h4 class="hasAnchor">
<a href="#packageaddresourcedescriptor--resource" class="anchor"></a>package$addResource(descriptor) ⇒ <code>Resource</code>
</h4>
<p>Add a resource</p>
<p><strong>Returns</strong>: <code>Resource</code> - added resource instance</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
</tr></thead>
<tbody><tr class="odd">
<td>descriptor</td>
<td><code>Object</code></td>
</tr></tbody>
</table>
</div>
<div id="packageremoveresourcename--resource--null" class="section level4">
<h4 class="hasAnchor">
<a href="#packageremoveresourcename--resource--null" class="anchor"></a>package$removeResource(name) ⇒ <code>Resource</code> | <code>null</code>
</h4>
<p>Remove a resource</p>
<p><strong>Returns</strong>: <code>Resource</code> | <code>null</code> - removed resource instance if exists</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
</tr></thead>
<tbody><tr class="odd">
<td>name</td>
<td><code>string</code></td>
</tr></tbody>
</table>
</div>
<div id="packageinferpattern--object" class="section level4">
<h4 class="hasAnchor">
<a href="#packageinferpattern--object" class="anchor"></a>package$infer(pattern) ⇒ <code>Object</code>
</h4>
<p>Infer metadata</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Default</th>
</tr></thead>
<tbody><tr class="odd">
<td>pattern</td>
<td><code>string</code></td>
<td><code>false</code></td>
</tr></tbody>
</table>
</div>
<div id="packagecommitstrict--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#packagecommitstrict--boolean" class="anchor"></a>package$commit(strict) ⇒ <code>Boolean</code>
</h4>
<p>Update package instance if there are in-place changes in the descriptor.</p>
<p><strong>Returns</strong>: <code>Boolean</code> - returns true on success and false if not modified<br><strong>Throws</strong>:</p>
<ul>
<li>
<code>DataPackageError</code> raises any error occurred in the process</li>
</ul>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>strict</td>
<td><code>boolean</code></td>
<td>alter <code>strict</code> mode for further work</td>
</tr></tbody>
</table>
<p><strong>Example</strong></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">dataPackage &lt;-<span class="st"> </span><span class="kw"><a href="reference/Package.load.html">Package.load</a></span>(<span class="st">'{</span></a>
<a class="sourceLine" id="cb68-2" title="2"><span class="st">"name": "package",</span></a>
<a class="sourceLine" id="cb68-3" title="3"><span class="st">"resources": [{"name": "resource", "data": ["data"]}]</span></a>
<a class="sourceLine" id="cb68-4" title="4"><span class="st">}'</span>)</a>
<a class="sourceLine" id="cb68-5" title="5">dataPackage<span class="op">$</span>descriptor<span class="op">$</span>name <span class="co"># package</span></a></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1"><span class="co">## [1] "package"</span></a></code></pre></div>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">dataPackage<span class="op">$</span>descriptor<span class="op">$</span>name &lt;-<span class="st"> 'renamed-package'</span></a>
<a class="sourceLine" id="cb70-2" title="2">dataPackage<span class="op">$</span>descriptor<span class="op">$</span>name <span class="co"># renamed-package</span></a></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="co">## [1] "renamed-package"</span></a></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1">dataPackage<span class="op">$</span><span class="kw">commit</span>()</a></code></pre></div>
<div class="sourceCode" id="cb73"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1"><span class="co">## [1] TRUE</span></a></code></pre></div>
</div>
<div id="packagesavetarget-raises-returns" class="section level4">
<h4 class="hasAnchor">
<a href="#packagesavetarget-raises-returns" class="anchor"></a>package$save(target, raises, returns)</h4>
<p>Save data package to target destination.</p>
<p>If target path has a zip file extension the package will be zipped and saved entirely. If it has a json file extension only the descriptor will be saved.</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>target</td>
<td><code>string</code></td>
<td>path where to save a data package</td>
</tr>
<tr class="even">
<td>raises</td>
<td><code>DataPackageError</code></td>
<td>error if something goes wrong</td>
</tr>
<tr class="odd">
<td>returns</td>
<td><code>boolean</code></td>
<td>true on success</td>
</tr>
</tbody>
</table>
</div>
<div id="packageloaddescriptor-basepath-strict--package" class="section level4">
<h4 class="hasAnchor">
<a href="#packageloaddescriptor-basepath-strict--package" class="anchor"></a>Package.load(descriptor, basePath, strict) ⇒ <a href="#Package"><code>Package</code></a>
</h4>
<p>Factory method to instantiate <code>Package</code> class.</p>
<p>This method is async and it should be used with await keyword or as a <code>Promise</code>.</p>
<p><strong>Returns</strong>: <a href="#Package"><code>Package</code></a> - returns data package class instance<br><strong>Throws</strong>:</p>
<ul>
<li>
<code>DataPackageError</code> raises error if something goes wrong</li>
</ul>
<table class="table">
<colgroup>
<col width="5%">
<col width="21%">
<col width="73%">
</colgroup>
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>descriptor</td>
<td><code>string</code></td>
<td><code>Object</code></td>
</tr>
<tr class="even">
<td>basePath</td>
<td><code>string</code></td>
<td>base path for all relative paths</td>
</tr>
<tr class="odd">
<td>strict</td>
<td><code>boolean</code></td>
<td>strict flag to alter validation behavior. Setting it to <code>true</code> leads to throwing errors on any operation with invalid descriptor</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="resource-1" class="section level3">
<h3 class="hasAnchor">
<a href="#resource-1" class="anchor"></a>Resource</h3>
<p>Resource representation</p>
<ul>
<li><a href="#Resource">Resource</a></li>
<li><em>instance</em></li>
<li>
<a href="#Resource+valid">$valid</a> ⇒ <code>Boolean</code>
</li>
<li>
<a href="#Resource+errors">$errors</a> ⇒ <code>List.&lt;Error&gt;</code>
</li>
<li>
<a href="#Resource+profile">$profile</a> ⇒ <code>Profile</code>
</li>
<li>
<a href="#Resource+descriptor">$descriptor</a> ⇒ <code>Object</code>
</li>
<li>
<a href="#Resource+name">$name</a> ⇒ <code>string</code>
</li>
<li>
<a href="#Resource+inline">$inline</a> ⇒ <code>boolean</code>
</li>
<li>
<a href="#Resource+local">$local</a> ⇒ <code>boolean</code>
</li>
<li>
<a href="#Resource+remote">$remote</a> ⇒ <code>boolean</code>
</li>
<li>
<a href="#Resource+multipart">$multipart</a> ⇒ <code>boolean</code>
</li>
<li>
<a href="#Resource+tabular">$tabular</a> ⇒ <code>boolean</code>
</li>
<li>
<a href="#Resource+source">$source</a> ⇒ <code>List</code> | <code>string</code>
</li>
<li>
<a href="#Resource+headers">$headers</a> ⇒ <code>List.&lt;string&gt;</code>
</li>
<li>
<a href="#Resource+schema">$schema</a> ⇒ <code>tableschema.Schema</code>
</li>
<li>
<a href="#Resource+iter">$iter(keyed, extended, cast, forceCast, relations, stream)</a> ⇒ <code>AsyncIterator</code> | <code>Stream</code>
</li>
<li>
<a href="#Resource+read">$read(limit)</a> ⇒ <code>List.&lt;List&gt;</code> | <code>List.&lt;Object&gt;</code>
</li>
<li>
<a href="#Resource+checkRelations">$checkRelations()</a> ⇒ <code>boolean</code>
</li>
<li>
<a href="#Resource+rawIter">$rawIter(stream)</a> ⇒ <code>Iterator</code> | <code>Stream</code>
</li>
<li>
<a href="#Resource+rawRead">$rawRead()</a> ⇒ <code>Buffer</code>
</li>
<li>
<a href="#Resource+infer">$infer()</a> ⇒ <code>Object</code>
</li>
<li>
<a href="#Resource+commit">$commit(strict)</a> ⇒ <code>boolean</code>
</li>
<li>
<a href="#Resource+save">$save(target)</a> ⇒ <code>boolean</code>
</li>
<li><em>static</em></li>
<li>
<a href="#Resource.load">$load(descriptor, basePath, strict)</a> ⇒ <a href="#Resource"><code>Resource</code></a>
</li>
</ul>
<div id="resourcevalid--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcevalid--boolean" class="anchor"></a>resource$valid ⇒ <code>Boolean</code>
</h4>
<p>Validation status</p>
<p>It always <code>true</code> in strict mode.</p>
<p><strong>Returns</strong>: <code>Boolean</code> - returns validation status</p>
</div>
<div id="resourceerrors--listerror" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceerrors--listerror" class="anchor"></a>resource$errors ⇒ <code>List.&lt;Error&gt;</code>
</h4>
<p>Validation errors</p>
<p>It always empty in strict mode.</p>
<p><strong>Returns</strong>: <code>List.&lt;Error&gt;</code> - returns validation errors</p>
</div>
<div id="resourceprofile--profile" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceprofile--profile" class="anchor"></a>resource$profile ⇒ <code>Profile</code>
</h4>
<p>Profile</p>
</div>
<div id="resourcedescriptor--object" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcedescriptor--object" class="anchor"></a>resource$descriptor ⇒ <code>Object</code>
</h4>
<p>Descriptor</p>
<p><strong>Returns</strong>: <code>Object</code> - schema descriptor</p>
</div>
<div id="resourcename--string" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcename--string" class="anchor"></a>resource$name ⇒ <code>string</code>
</h4>
<p>Name</p>
</div>
<div id="resourceinline--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceinline--boolean" class="anchor"></a>resource$inline ⇒ <code>boolean</code>
</h4>
<p>Whether resource is inline</p>
</div>
<div id="resourcelocal--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcelocal--boolean" class="anchor"></a>resource$local ⇒ <code>boolean</code>
</h4>
<p>Whether resource is local</p>
</div>
<div id="resourceremote--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceremote--boolean" class="anchor"></a>resource$remote ⇒ <code>boolean</code>
</h4>
<p>Whether resource is remote</p>
</div>
<div id="resourcemultipart--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcemultipart--boolean" class="anchor"></a>resource$multipart ⇒ <code>boolean</code>
</h4>
<p>Whether resource is multipart</p>
</div>
<div id="resourcetabular--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcetabular--boolean" class="anchor"></a>resource$tabular ⇒ <code>boolean</code>
</h4>
<p>Whether resource is tabular</p>
</div>
<div id="resourcesource--list--string" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcesource--list--string" class="anchor"></a>resource$source ⇒ <code>List</code> | <code>string</code>
</h4>
<p>Source</p>
<p>Combination of <code>resource.source</code> and <code>resource.inline/local/remote/multipart</code> provides predictable interface to work with resource data.</p>
</div>
<div id="resourceheaders--liststring" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceheaders--liststring" class="anchor"></a>resource$headers ⇒ <code>List.&lt;string&gt;</code>
</h4>
<p>Headers</p>
<blockquote>
<p>Only for tabular resources</p>
</blockquote>
<p><strong>Returns</strong>: <code>List.&lt;string&gt;</code> - data source headers</p>
</div>
<div id="resourceschema--tableschemaschema" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceschema--tableschemaschema" class="anchor"></a>resource$schema ⇒ <code>tableschema.Schema</code>
</h4>
<p>Schema</p>
<blockquote>
<p>Only for tabular resources</p>
</blockquote>
</div>
<div id="resourceiterkeyed-extended-cast-forcecast-relations-stream--asynciterator--stream" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceiterkeyed-extended-cast-forcecast-relations-stream--asynciterator--stream" class="anchor"></a>resource$iter(keyed, extended, cast, forceCast, relations, stream) ⇒ <code>AsyncIterator</code> | <code>Stream</code>
</h4>
<p>Iterate through the table data</p>
<blockquote>
<p>Only for tabular resources</p>
</blockquote>
<p>And emits rows cast based on table schema (async for loop). With a <code>stream</code> flag instead of async iterator a Node stream will be returned. Data casting can be disabled.</p>
<p><strong>Returns</strong>: <code>AsyncIterator</code> | <code>Stream</code> - async iterator/stream of rows: - <code>[value1, value2]</code> - base - <code>{header1: value1, header2: value2}</code> - keyed - <code>[rowNumber, [header1, header2], [value1, value2]]</code> - extended<br><strong>Throws</strong>:</p>
<ul>
<li>
<code>TableSchemaError</code> raises any error occurred in this process</li>
</ul>
<table class="table">
<colgroup>
<col width="2%">
<col width="6%">
<col width="90%">
</colgroup>
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>keyed</td>
<td><code>boolean</code></td>
<td>iter keyed rows</td>
</tr>
<tr class="even">
<td>extended</td>
<td><code>boolean</code></td>
<td>iter extended rows</td>
</tr>
<tr class="odd">
<td>cast</td>
<td><code>boolean</code></td>
<td>disable data casting if false</td>
</tr>
<tr class="even">
<td>forceCast</td>
<td><code>boolean</code></td>
<td>instead of raising on the first row with cast error return an error object to replace failed row. It will allow to iterate over the whole data file even if it’s not compliant to the schema. Example of output stream: <code>[['val1', 'val2'], TableSchemaError, ['val3', 'val4'], ...]</code>
</td>
</tr>
<tr class="odd">
<td>relations</td>
<td><code>boolean</code></td>
<td>if true foreign key fields will be checked and resolved to its references</td>
</tr>
<tr class="even">
<td>stream</td>
<td><code>boolean</code></td>
<td>return Node Readable Stream of table rows</td>
</tr>
</tbody>
</table>
</div>
<div id="resourcereadlimit--listlist--listobject" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcereadlimit--listlist--listobject" class="anchor"></a>resource$read(limit) ⇒ <code>List.&lt;List&gt;</code> | <code>List.&lt;Object&gt;</code>
</h4>
<p>Read the table data into memory</p>
<blockquote>
<p>Only for tabular resources; the API is the same as <code>resource.iter</code> has except for:</p>
</blockquote>
<p><strong>Returns</strong>: <code>List.&lt;List&gt;</code> | <code>List.&lt;Object&gt;</code> - list of rows: - <code>[value1, value2]</code> - base - <code>{header1: value1, header2: value2}</code> - keyed - <code>[rowNumber, [header1, header2], [value1, value2]]</code> - extended</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>limit</td>
<td><code>integer</code></td>
<td>limit of rows to read</td>
</tr></tbody>
</table>
</div>
<div id="resourcecheckrelations--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcecheckrelations--boolean" class="anchor"></a>resource$checkRelations() ⇒ <code>boolean</code>
</h4>
<p>It checks foreign keys and raises an exception if there are integrity issues.</p>
<blockquote>
<p>Only for tabular resources</p>
</blockquote>
<p><strong>Returns</strong>: <code>boolean</code> - returns True if no issues<br><strong>Throws</strong>:</p>
<ul>
<li>
<code>DataPackageError</code> raises if there are integrity issues</li>
</ul>
</div>
<div id="resourcerawiterstream--iterator--stream" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcerawiterstream--iterator--stream" class="anchor"></a>resource$rawIter(stream) ⇒ <code>Iterator</code> | <code>Stream</code>
</h4>
<p>Iterate over data chunks as bytes. If <code>stream</code> is true Node Stream will be returned.</p>
<p><strong>Returns</strong>: <code>Iterator</code> | <code>Stream</code> - returns Iterator/Stream</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>stream</td>
<td><code>boolean</code></td>
<td>Node Stream will be returned</td>
</tr></tbody>
</table>
</div>
<div id="resourcerawread--buffer" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcerawread--buffer" class="anchor"></a>resource$rawRead() ⇒ <code>Buffer</code>
</h4>
<p>Returns resource data as bytes.</p>
<p><strong>Returns</strong>: <code>Buffer</code> - returns Buffer with resource data</p>
</div>
<div id="resourceinfer--object" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceinfer--object" class="anchor"></a>resource$infer() ⇒ <code>Object</code>
</h4>
<p>Infer resource metadata like name, format, mediatype, encoding, schema and profile.</p>
<p>It commits this changes into resource instance.</p>
<p><strong>Returns</strong>: <code>Object</code> - returns resource descriptor</p>
</div>
<div id="resourcecommitstrict--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcecommitstrict--boolean" class="anchor"></a>resource$commit(strict) ⇒ <code>boolean</code>
</h4>
<p>Update resource instance if there are in-place changes in the descriptor.</p>
<p><strong>Returns</strong>: <code>boolean</code> - returns true on success and false if not modified<br><strong>Throws</strong>:</p>
<ul>
<li>DataPackageError raises error if something goes wrong</li>
</ul>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>strict</td>
<td><code>boolean</code></td>
<td>alter <code>strict</code> mode for further work</td>
</tr></tbody>
</table>
</div>
<div id="resourcesavetarget--boolean" class="section level4">
<h4 class="hasAnchor">
<a href="#resourcesavetarget--boolean" class="anchor"></a>resource$save(target) ⇒ <code>boolean</code>
</h4>
<p>Save resource to target destination.</p>
<blockquote>
<p>For now only descriptor will be saved.</p>
</blockquote>
<p><strong>Returns</strong>: <code>boolean</code> - returns true on success<br><strong>Throws</strong>:</p>
<ul>
<li>
<code>DataPackageError</code> raises error if something goes wrong</li>
</ul>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>target</td>
<td><code>string</code></td>
<td>path where to save a resource</td>
</tr></tbody>
</table>
</div>
<div id="resourceloaddescriptor-basepath-strict--resource" class="section level4">
<h4 class="hasAnchor">
<a href="#resourceloaddescriptor-basepath-strict--resource" class="anchor"></a>Resource.load(descriptor, basePath, strict) ⇒ <a href="#Resource"><code>Resource</code></a>
</h4>
<p>Factory method to instantiate <code>Resource</code> class.</p>
<p>This method is async and it should be used with await keyword or as a <code>Promise</code>.</p>
<p><strong>Returns</strong>: <a href="#Resource"><code>Resource</code></a> - returns resource class instance<br><strong>Throws</strong>:</p>
<ul>
<li>
<code>DataPackageError</code> raises error if something goes wrong</li>
</ul>
<table class="table">
<colgroup>
<col width="5%">
<col width="22%">
<col width="71%">
</colgroup>
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>descriptor</td>
<td><code>string</code></td>
<td><code>Object</code></td>
</tr>
<tr class="even">
<td>basePath</td>
<td><code>string</code></td>
<td>base path for all relative paths</td>
</tr>
<tr class="odd">
<td>strict</td>
<td><code>boolean</code></td>
<td>strict flag to alter validation behavior. Setting it to <code>true</code> leads to throwing errors on any operation with invalid descriptor</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="profile" class="section level3">
<h3 class="hasAnchor">
<a href="#profile" class="anchor"></a>Profile</h3>
<p>Profile representation</p>
<ul>
<li><a href="#Profile">Profile</a></li>
<li><em>instance</em></li>
<li>
<a href="#Profile+name">$name</a> ⇒ <code>string</code>
</li>
<li>
<a href="#Profile+jsonschema">$jsonschema</a> ⇒ <code>Object</code>
</li>
<li>
<a href="#Profile+validate">$validate(descriptor)</a> ⇒ <code>Object</code>
</li>
<li><em>static</em></li>
<li>
<a href="#Profile.load">$load(profile)</a> ⇒ <a href="#Profile"><code>Profile</code></a>
</li>
</ul>
<div id="profilename--string" class="section level4">
<h4 class="hasAnchor">
<a href="#profilename--string" class="anchor"></a>profile$name ⇒ <code>string</code>
</h4>
<p>Name</p>
</div>
<div id="profilejsonschema--object" class="section level4">
<h4 class="hasAnchor">
<a href="#profilejsonschema--object" class="anchor"></a>profile$jsonschema ⇒ <code>Object</code>
</h4>
<p>JsonSchema</p>
</div>
<div id="profilevalidatedescriptor--object" class="section level4">
<h4 class="hasAnchor">
<a href="#profilevalidatedescriptor--object" class="anchor"></a>profile$validate(descriptor) ⇒ <code>Object</code>
</h4>
<p>Validate a data package <code>descriptor</code> against the profile.</p>
<p><strong>Returns</strong>: <code>Object</code> - returns a <code>{valid, errors}</code> object</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>descriptor</td>
<td><code>Object</code></td>
<td>retrieved and dereferenced data package descriptor</td>
</tr></tbody>
</table>
</div>
<div id="profileloadprofile--profile" class="section level4">
<h4 class="hasAnchor">
<a href="#profileloadprofile--profile" class="anchor"></a>Profile.load(profile) ⇒ <a href="#Profile"><code>Profile</code></a>
</h4>
<p>Factory method to instantiate <code>Profile</code> class.</p>
<p>This method is async and it should be used with await keyword or as a <code>Promise</code>.</p>
<p><strong>Returns</strong>: <a href="#Profile"><code>Profile</code></a> - returns profile class instance<br><strong>Throws</strong>:</p>
<ul>
<li>
<code>DataPackageError</code> raises error if something goes wrong</li>
</ul>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>profile</td>
<td><code>string</code></td>
<td>profile name in registry or URL to JSON Schema</td>
</tr></tbody>
</table>
</div>
</div>
<div id="validatedescriptor--object" class="section level3">
<h3 class="hasAnchor">
<a href="#validatedescriptor--object" class="anchor"></a>validate(descriptor) ⇒ <code>Object</code>
</h3>
<p>This function is async so it has to be used with <code>await</code> keyword or as a <code>Promise</code>.</p>
<p><strong>Returns</strong>: <code>Object</code> - returns a <code>{valid, errors}</code> object</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>descriptor</td>
<td><code>string</code></td>
<td><code>Object</code></td>
</tr></tbody>
</table>
</div>
<div id="inferpattern--object" class="section level3">
<h3 class="hasAnchor">
<a href="#inferpattern--object" class="anchor"></a>infer(pattern) ⇒ <code>Object</code>
</h3>
<p>This function is async so it has to be used with <code>await</code> keyword or as a <code>Promise</code>.</p>
<p><strong>Returns</strong>: <code>Object</code> - returns data package descriptor</p>
<table class="table">
<thead><tr class="header">
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>pattern</td>
<td><code>string</code></td>
<td>glob file pattern</td>
</tr></tbody>
</table>
</div>
<div id="datapackageerror" class="section level3">
<h3 class="hasAnchor">
<a href="#datapackageerror" class="anchor"></a>DataPackageError</h3>
<p>Base class for the all DataPackage errors.</p>
</div>
<div id="tableschemaerror" class="section level3">
<h3 class="hasAnchor">
<a href="#tableschemaerror" class="anchor"></a>TableSchemaError</h3>
<p>Base class for the all TableSchema errors.</p>
</div>
</div>
</div>
<div id="contributing" class="section level1">
<h1 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h1>
<p>The project follows the <a href="https://github.com/okfn/coding-standards">Open Knowledge International coding standards</a>. There are common commands to work with the project.Recommended way to get started is to create, activate and load the package environment. To install package and development dependencies into active environment:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"frictionlessdata/datapackage-r"</span>, <span class="dt">dependencies=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p>To make test:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">test_that</span>(description, {</a>
<a class="sourceLine" id="cb75-2" title="2"><span class="kw">expect_equal</span>(test, expected result)</a>
<a class="sourceLine" id="cb75-3" title="3">})</a></code></pre></div>
<p>To run tests:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://devtools.r-lib.org//reference/test.html">test</a></span>()</a></code></pre></div>
<p>more detailed information about how to create and run tests you can find in <a href="https://github.com/hadley/testthat">testthat package</a></p>
<div id="changelog---news" class="section level2">
<h2 class="hasAnchor">
<a href="#changelog---news" class="anchor"></a>Changelog - News</h2>
<p>In <a href="https://github.com/frictionlessdata/datapackage-r/blob/master/NEWS.md">NEWS.md</a> described only breaking and the most important changes. The full changelog could be found in nicely formatted <a href="https://github.com/frictionlessdata/datapackage-r/commits/master">commit</a> history.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=datapackage.r">https://​cloud.r-project.org/​package=datapackage.r</a>
</li>
<li>Browse source code at <br><a href="https://github.com/frictionlessdata/datapackage-r">https://​github.com/​frictionlessdata/​datapackage-r</a>
</li>
<li>Report a bug at <br><a href="https://github.com/frictionlessdata/datapackage-r/issues">https://​github.com/​frictionlessdata/​datapackage-r/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Kleanthis Koupidis <br><small class="roles"> Author, maintainer </small>  </li>
<li>Lazaros Ioannidis <br><small class="roles"> Author </small>  </li>
<li>Charalampos Bratsas <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Kleanthis Koupidis, Lazaros Ioannidis, Charalampos Bratsas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
